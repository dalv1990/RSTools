---
title: "RSiena Tools: An Overview"
author: "John Light"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{RSiena Tools: An Overview}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Introduction

Social network data is inherently complicated. In ordinary survey analysis,
one typically has data on individuals, i.e., one row of a table per
individual, with a set of variables (observations on that individual) extending
across rows. If the study in question is longitudinal, there will typically
be multiple such records for each individual, one for each observational
period (wave). Some of these variables may be fixed, however (such as DOB,
gender, etc.), raising the question whether these should be kept in a separate
table, linked to the longitudinal variables by a subject ID (SID). However,
since most statistical analysis software cannot handle SQL-style table
joins, this type of data organization is generally fudged, by including
fixed variables repetitively, along with actual time-varying variables,
from one wave record to the next. But at least the familiar two-dimensional
data structure can be retained.

Where social network data are involved, this fudge is not available.
The analyst or data scientist is forced to contemplate more logical and
efficient data structures, which however are also more complicated. Further,
there is no particular consensus on what these data structures should look
like, and in most statistical software (e.g. SPSS, SAS, Stata) no machinery
either for creating a workable structure, or for accessing the data in it
in analytically meaningful ways. There is the additional problem of 
reproducability--subsets of data need to be easily linked to analyses
performed on them, and the more complicated the relevant scripts become,
the greater the chance of error and confusion.

The 'RSTools' package represents an attempt to begin to address some of these
issues. The package implements a somewhat but not completely project-specific
set of functions designed to (a) pull data from a raw (but clean) data
repository, (b) create useful intermediate objects that can be kept in a
workspace and used for (c) creating data objects that can be used by 
the social network analysis packages 'network' and 'RSiena'. It is, I think,
still a pretty primitive attempt at generality! However, at least for the
particular project it has been implemented for (ORI's "Peer Influences"
project, J. Light & J.C. Rusby, Co-principal Investigators), it implies a
specific, straightforward, clean, and highly reproduceable workflow that
may generalize to many other social network studies. At worst, it will have
been worth the effort required by making this one study's data management
and analysis more tractable that it would have been otherwise.

The name 'RSTools' was chosen because the primary analyses anticipated are
Snijders' Stochastic Actor Oriented Models (SAOMs), as implemented by the
package 'RSiena'. However it turns out that 'network'-class networks--
which RSiena cannot utilize directly--are also very handy, as they are
easily graphed, and both the 'network' and 'sna' packages can be applied to
calculate various descriptive statistics for 'network'-class objects
at the network, vertex, and edge level. Consequently, the workflow assumes
that both dgTMatrix (sparse matrix) and network-class networks will be
desired, and there should be a way to create them from the same underlying,
known-consistent sets of data objects. 

The following rather bare-bones description provides an overview of RSTools,
presented in terms of the expected analysis workflow.

## Styles

The `html_vignette` template includes a basic CSS theme. To override this theme you can specify your own CSS in the document metadata as follows:

    output: 
      rmarkdown::html_vignette:
        css: mystyles.css

## Figures

The figure sizes have been customised so that you can easily put two images side-by-side. 

```{r, fig.show='hold'}
plot(1:10)
plot(10:1)
```

You can enable figure captions by `fig_caption: yes` in YAML:

    output:
      rmarkdown::html_vignette:
        fig_caption: yes

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

You can write math expressions, e.g. $Y = X\beta + \epsilon$, footnotes^[A footnote here.], and tables, e.g. using `knitr::kable()`.

```{r, echo=FALSE, results='asis'}
knitr::kable(head(mtcars, 10))
```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))
